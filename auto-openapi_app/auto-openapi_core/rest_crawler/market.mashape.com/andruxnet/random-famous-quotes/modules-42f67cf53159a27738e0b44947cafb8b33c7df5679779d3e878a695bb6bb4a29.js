function Hellobar(){function e(){return e.module.apply(this,arguments)}function t(e){this.name="HellobarException",this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack,this.toString=function(){return e}}function n(e,n){if(!e)throw new t(n||"Required value is empty");return e}function i(o,a,l,s){function u(){return(c.dependencyNames||[]).map(function(t){return"hellobar"===t?e:l?n(l[t],"Dependency "+t+" is not specified"):i(t)})}var c=r[o];if(!c){if(s)return undefined;throw new t("Cannot find HelloBar module "+o+". Please define the module with hellobar.defineModule call")}if(!c.module){var f=u();c.module=c.moduleFactory.apply(e,f)}return c.initialized||(c.module.initialize?c.module.initialize(a):a&&c.module.configuration&&a.call(c.module,c.module.configuration()),c.initialized=!0),c.module}function o(e){function n(e,n){if("string"==typeof n){if(typeof e!==n)throw new t("Wrong value type. Type "+n+" expected, but "+typeof e+" is given")}else if("function"==typeof n&&!(e instanceof n))throw new t("Wrong value type. Value does not match the required constructor")}function i(e,t,i){var r=i;o[e]=function(e){return void 0===e?r:(t&&n(e,t),r=e,o)}}var o=this;if(e)for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];"string"==typeof a||"function"==typeof a?i(r,a):"object"==typeof a&&i(r,a.type,a.defaultValue)}}var r={};return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,e.module=function(e,t){return i(e,t&&t.configurator||null,t&&t.dependencies||null,t&&t.allowUndefined||!1)},e.finalize=function(){for(var e in r)if(r.hasOwnProperty(e)){var t=r[e];t.finalize&&t.finalize(),t.module=null,t.initialized=!1}},e.defineModule=function(e,t,n){r[e]?console.warn("HelloBar: Module "+e+" has been already defined"):r[e]={dependencyNames:t,moduleFactory:n,initialized:!1}},e.createModuleConfiguration=function(e){return new o(e)},e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}"undefined"==typeof window.hellobar&&(window.hellobar=Hellobar());var CryptoJS=CryptoJS||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},o=i.lib={},r=o.Base=function(){return{extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=o.WordArray=r.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<o;r++){var a=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=a<<24-(i+r)%4*8}else for(var r=0;r<o;r+=4)t[i+r>>>2]=n[r>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,i=[],o=function(t){var t=t,n=987654321,i=4294967295;return function(){n=36969*(65535&n)+(n>>16)&i,t=18e3*(65535&t)+(t>>16)&i;var o=(n<<16)+t&i;return o/=4294967296,(o+=.5)*(e.random()>.5?1:-1)}},r=0;r<t;r+=4){var l=o(4294967296*(n||e.random()));n=987654071*l(),i.push(4294967296*l()|0)}return new a.init(i,t)}}),l=i.enc={},s=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new a.init(n,t/2)}},u=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new a.init(n,t)}},c=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=o.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,o=n.sigBytes,r=this.blockSize,l=4*r,s=o/l;s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);var u=s*r,c=e.min(4*u,o);if(u){for(var f=0;f<u;f+=r)this._doProcessBlock(i,f);var d=i.splice(0,u);n.sigBytes-=c}return new a.init(d,c)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(o.Hasher=f.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}}),i.algo={});return i}(Math);!function(e){var t=CryptoJS,n=t.lib,i=n.Base,o=n.WordArray,r=t.x64={};r.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),r.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var r=e[i];n.push(r.high),n.push(r.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}})}(),function(){var e=CryptoJS,t=e.lib,n=t.Base,i=e.enc,o=i.Utf8,r=e.algo;r.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,i=4*n;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),l=r.words,s=a.words,u=0;u<n;u++)l[u]^=1549556828,s[u]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(),function(){var e=CryptoJS,t=e.lib,n=t.WordArray,i=t.Hasher,o=e.algo,r=[],a=o.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],a=n[2],l=n[3],s=n[4],u=0;u<80;u++){if(u<16)r[u]=0|e[t+u];else{var c=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=c<<1|c>>>31}var f=(i<<5|i>>>27)+s+r[u];f+=u<20?1518500249+(o&a|~o&l):u<40?1859775393+(o^a^l):u<60?(o&a|o&l|a&l)-1894007588:(o^a^l)-899497514,s=l,l=a,a=o<<30|o>>>2,o=i,i=f}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+l|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(i+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a)}(),function(){function e(){return r.create.apply(r,arguments)}var t=CryptoJS,n=t.lib,i=n.Hasher,o=t.x64,r=o.Word,a=o.WordArray,l=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],u=[];!function(){for(var t=0;t<80;t++)u[t]=e()}();var c=l.SHA512=i.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],a=n[3],l=n[4],c=n[5],f=n[6],d=n[7],h=i.high,m=i.low,p=o.high,v=o.low,g=r.high,y=r.low,b=a.high,w=a.low,_=l.high,k=l.low,C=c.high,E=c.low,x=f.high,S=f.low,I=d.high,D=d.low,T=h,M=m,O=p,A=v,B=g,j=y,N=b,z=w,H=_,P=k,V=C,L=E,W=x,R=S,U=I,q=D,F=0;F<80;F++){var $=u[F];if(F<16)var K=$.high=0|e[t+2*F],G=$.low=0|e[t+2*F+1];else{var J=u[F-15],Y=J.high,X=J.low,Z=(Y>>>1|X<<31)^(Y>>>8|X<<24)^Y>>>7,Q=(X>>>1|Y<<31)^(X>>>8|Y<<24)^(X>>>7|Y<<25),ee=u[F-2],te=ee.high,ne=ee.low,ie=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),re=u[F-7],ae=re.high,le=re.low,se=u[F-16],ue=se.high,ce=se.low,G=Q+le,K=Z+ae+(G>>>0<Q>>>0?1:0),G=G+oe,K=K+ie+(G>>>0<oe>>>0?1:0),G=G+ce,K=K+ue+(G>>>0<ce>>>0?1:0);$.high=K,$.low=G}var fe=H&V^~H&W,de=P&L^~P&R,he=T&O^T&B^O&B,me=M&A^M&j^A&j,pe=(T>>>28|M<<4)^(T<<30|M>>>2)^(T<<25|M>>>7),ve=(M>>>28|T<<4)^(M<<30|T>>>2)^(M<<25|T>>>7),ge=(H>>>14|P<<18)^(H>>>18|P<<14)^(H<<23|P>>>9),ye=(P>>>14|H<<18)^(P>>>18|H<<14)^(P<<23|H>>>9),be=s[F],we=be.high,_e=be.low,ke=q+ye,Ce=U+ge+(ke>>>0<q>>>0?1:0),ke=ke+de,Ce=Ce+fe+(ke>>>0<de>>>0?1:0),ke=ke+_e,Ce=Ce+we+(ke>>>0<_e>>>0?1:0),ke=ke+G,Ce=Ce+K+(ke>>>0<G>>>0?1:0),Ee=ve+me,xe=pe+he+(Ee>>>0<ve>>>0?1:0);U=W,q=R,W=V,R=L,V=H,L=P,P=z+ke|0,H=N+Ce+(P>>>0<z>>>0?1:0)|0,N=B,z=j,B=O,j=A,O=T,A=M,M=ke+Ee|0,T=Ce+xe+(M>>>0<ke>>>0?1:0)|0}m=i.low=m+M,i.high=h+T+(m>>>0<M>>>0?1:0),v=o.low=v+A,o.high=p+O+(v>>>0<A>>>0?1:0),y=r.low=y+j,r.high=g+B+(y>>>0<j>>>0?1:0),w=a.low=w+z,a.high=b+N+(w>>>0<z>>>0?1:0),k=l.low=k+P,l.high=_+H+(k>>>0<P>>>0?1:0),E=c.low=E+L,c.high=C+V+(E>>>0<L>>>0?1:0),S=f.low=S+R,f.high=x+W+(S>>>0<R>>>0?1:0),D=d.low=D+q,d.high=I+U+(D>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(i+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=i._createHelper(c),t.HmacSHA512=i._createHmacHelper(c)}(),function(){hellobar.defineModule("lib.crypto",[],function(){return CryptoJS})}(),hellobar.defineModule("base.ajax",[],function(){function e(e){var t=new XMLHttpRequest;t.open(e.type||"GET",e.url),t.send(null),t.onreadystatechange=function(){t.readyState===XMLHttpRequest.DONE&&(200===t.status?e.success&&e.success(t.responseText,t):e.error&&e.error(t))}}var t=e;return t.get=function(t,n,i){return e({url:t,type:"GET",success:n,error:i})},t}),hellobar.defineModule("base.bus",["hellobar"],function(e){function t(e,t){i[e]||(i[e]=[]),i[e].push(t)}function n(){var t=arguments[0];if(i&&i[t]){for(var n=i[t].length,o=[],r=1;r<arguments.length;r++)o.push(arguments[r]);for(r=0;r<n;r++)!function(t,n){setTimeout(function(){i[t][n].apply(e,o)},n)}(t,r)}}var i={};return{on:t,trigger:n}}),hellobar.defineModule("base.capabilities",["hellobar"],function(e){var t=e.createModuleConfiguration({capabilities:"object"});return{configuration:function(){return t},has:function(e){var n=t.capabilities();if(n)return!!n[e];console.warn("Capabilities not defined")}}}),hellobar.defineModule("base.cdn",[],function(){function e(e,t){var n=r[e];return n&&n.indexOf(t)>=0}function t(e,t){var n=r[e];n?n.push(t):r[e]=[t]}function n(n,i,o){if(!e(n,i)){var r=i||document,a=r.getElementsByTagName("head")[0],l=o(r);a.appendChild(l),t(n,i)}}function i(e,t){n(e,t,function(t){var n=t.createElement("LINK");return n.href=e,n.rel="stylesheet",n.type="text/css",n})}function o(e,t){n(e,t,function(t){var n=t.createElement("SCRIPT");return n.src=e,n.type="text/javascript",n})}var r={};return{addCss:i,addJs:o}}),hellobar.defineModule("base.cdn.libraries",["base.cdn"],function(e){function t(t){e.addCss("//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css",t)}function n(n){t(n);var i="2.6.0";e.addCss("//cdnjs.cloudflare.com/ajax/libs/froala-editor/"+i+"/css/froala_editor.min.css",n),e.addCss("//cdnjs.cloudflare.com/ajax/libs/froala-editor/"+i+"/css/plugins/colors.min.css",n),e.addCss("//cdnjs.cloudflare.com/ajax/libs/froala-editor/"+i+"/css/plugins/emoticons.css",n),e.addCss("//cdnjs.cloudflare.com/ajax/libs/froala-editor/"+i+"/css/plugins/image.min.css",n)}return{useFontAwesome:t,useFroala:n}}),hellobar.defineModule("base.coloring",[],function(){function e(e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return null==n||t(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16))>=.5}function t(e,t,n){for(var i=[e,t,n],o=0;o<3;o++){var r=i[o]/255;r=r<.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),i[o]=r}return.2126*i[0]+.7152*i[1]+.0722*i[2]}return{colorIsBright:e}});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();hellobar.defineModule("base.deferred",[],function(){function e(){var e=new t;return{promise:function(){return e},resolve:function(t){return e.resolve(t),this}}}var t=function(){function e(){_classCallCheck(this,e),this._resolved=!1,this._result=undefined,this._callbacks=[]}return _createClass(e,[{key:"then",value:function(e){return this._callbacks.push(e),this._resolved&&this._runCallbacks(),this}},{key:"_runCallbacks",value:function(){var t=this,n=function n(i,o){if(i>=t._callbacks.length)return t._result=o,void(t._callbacks=[]);var r=t._callbacks[i];if(r instanceof e)r.then(function(e){n(i+1,e)});else{n(i+1,r(o))}};this._callbacks.length>0&&n(0,this._result)}},{key:"resolve",value:function(e){this._resolved||(this._resolved=!0,this._result=e,this._runCallbacks())}}]),e}();return e.all=function(t){var n=e(),i=0,o=[],r=function(){return n.resolve(o)};return(!t||0===t.length)&&r(),t.forEach(function(n,a){return e.wrap(n).then(function(e){i++,o[a]=e,i>=t.length&&r()})}),n.promise()},e.constant=function(t){return e().resolve(t).promise()},e.wrap=function(n){return n instanceof t?n:e().resolve(n).promise()},e.Promise=t,e}),hellobar.defineModule("base.dom",[],function(){function e(e){if(e){e(document);var t=document.getElementsByTagName("iframe")||[];Array.prototype.forEach.call(t,function(t){try{e(t.contentDocument)}catch(e){e instanceof DOMException||console.warn(e)}})}}function t(e){var t="DOMContentLoaded",n=function n(){e&&e(),document.removeEventListener(t,n)};document.body?e&&setTimeout(e,0):document.addEventListener(t,n)}function n(e,t){e=r(e);var n=function(t){e.className.indexOf(t)<0&&(e.className+=" "+t)};"string"==typeof t?n(t):t.forEach(function(e){return n(e)})}function i(e,t){e=r(e);for(var n=e.className.split(" "),i=[],o=0;o<n.length;o++)n[o]!==t&&i.push(n[o]);e.className=i.join(" ")}function o(e,t,o){o?n(e,t):i(e,t)}function r(e){return"string"==typeof e?document.getElementById(e.replace("#","")):e}function a(e){!function(e){var t=0,n=-.1,i=1,o=e.style.position,r=e.style.left&&"auto"!==e.style.left?"left":"right",a=parseInt(e.style[r],0)||0,l=a,s=0;e.style.position="relative";var u=setInterval(function(){t+=n,l-a>=i&&n>0&&(n*=-1),l-a<=-i&&n<0&&(s+=1,n*=-1),l+=t,s>=2&&l>=a&&(clearInterval(u),e.style[r]=a+"px",e.style.position=o),e.style[r]=Math.round(l)+"px"},5)}(r(e))}function l(e){"object"==typeof e.classList&&(e.classList.remove("hb-animateOut"),e.classList.add("hb-animated"),e.classList.add("hb-animateIn")),f(e)}function s(e,t){"object"==typeof e.classList?(e.classList.remove("hb-animateIn"),e.classList.add("hb-animated"),e.classList.add("hb-animateOut")):c(e),"function"==typeof t&&window.setTimeout(t,250)}function u(e){var t=e.querySelector("#hellobar"),o=t.querySelector(".hellobar-cta");t.addEventListener("mouseenter",function(){i(o,"wiggle")}),t.addEventListener("mouseleave",function(){setTimeout(function(){n(o,"wiggle")},2500)})}function c(e){if(null!=e)if(e.length==undefined)e.style.display="none";else for(var t=0;t<e.length;++t)e[t].style.display="none"}function f(e,t){if(null!=e)if(void 0===t&&(t="inline"),e.length==undefined)e.style.display=t;else for(var n=0;n<e.length;++n)e[n].style.display=t}function d(e,t){if(e&&t){var n=e.style;for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}}function h(e,t){e&&(e.style.visibility=t?"visible":"hidden")}return{forAllDocuments:e,runOnDocumentReady:t,addClass:n,removeClass:i,setClass:o,shake:a,animateIn:l,animateOut:s,wiggleEventListeners:u,showElement:f,hideElement:c,$:r,setStyles:d,setVisibility:h}});var _slicedToArray=function(){function e(e,t){var n=[],i=!0,o=!1,r=undefined;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{!i&&l["return"]&&l["return"]()}finally{if(o)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();hellobar.defineModule("base.environment",["hellobar"],function(e){function t(){var e=f.userAgentProvider();return e?e():navigator.userAgent}function n(){var e=f.locationSearchProvider();return e?e():location.search}function i(){var e={},t=n();return t&&t.substr(1).split("&").forEach(function(t){var n=t.split("="),i=_slicedToArray(n,2),o=i[0],r=i[1];o&&/^utm_/i.test(o)&&r&&(e[o]=decodeURIComponent(r))}),e}function o(e){var t=r();return"Modal"===e.type?t<=640:"Slider"===e.type?t<=375:t<=640}function r(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function a(){return t().toLowerCase().indexOf("rv:11")!=-1}function l(e){var n=t().toLowerCase(),i=n.indexOf("msie")!=-1&&parseInt(n.split("msie")[1]);return!isNaN(i)&&null!=i&&0!=i&&(i<=e||void 0)}function s(){var e=t().toLowerCase();return e.indexOf("safari")>-1&&(e.indexOf("iphone")>-1||e.indexOf("ipad")>-1)}function u(){return"mobile"===c()}function c(){var e=t();return e.match(/ipad/i)?"tablet":e.match(/(mobi|phone|ipod|blackberry|docomo)/i)?"mobile":e.match(/(ipad|kindle|android)/i)?"tablet":"computer"}var f=e.createModuleConfiguration({userAgentProvider:"function",locationSearchProvider:"function"});return{configuration:function(){return f},utmCodes:i,device:c,isMobileDevice:u,isMobileWidth:o,isMobileSafari:s,isIE11:a,isIEXOrLess:l}}),hellobar.defineModule("base.format",[],function(){function e(e){return e.replace(/(.+)\/$/i,"$1")}function t(t,n){if(t=(t+"").toLowerCase(),(t.match(/^https?:\/\/[^\/?]*$/i)||t.match(/^[^\/]*\.(com|edu|gov|us|net|io)$/i))&&(t+="/"),t=t.replace(/([^\/])\?/,"$1/?"),t=t.replace(/https?:\/\//,"").replace(/^www\./,"").replace(/\#.*/,""),n&&(t.match(/^\//)||(t=t.replace(/.*?\//,"/"))),"/"===t||"/?"===t)return t;if(t.indexOf("?")===-1)return e(t);var i=t.split("?");if(!i[1])return e(i[0])+"?";var o=i[1].split("&").sort().join("&");return e(i[0]+"/")+"?"+o}function n(e){return!(!e||"false"==e||"0"==e)}function i(e){function t(){return window.location.href}var n=/^https?:\/\/([^\/]+)/i;return n.exec(t())[1]!==n.exec(e)[1]}function o(e){return e?"'"+e.replace(/\'/g," ")+"'":"null"}return{normalizeUrl:t,isExternalURL:i,asBool:n,stringLiteral:o}}),hellobar.defineModule("base.metainfo",["hellobar"],function(e){var t=e.createModuleConfiguration({version:"string",timestamp:"string"});return{configuration:function(){return t},version:function(){return t.version()},timestamp:function(){return t.timestamp()},info:function(){return"version "+t.version()+" was generated at "+t.timestamp()}}}),hellobar.defineModule("base.preview",["hellobar"],function(e){var t=e.createModuleConfiguration({previewIsActive:{type:"boolean",defaultValue:!1}}),n=null;return{configuration:function(){return t},isActive:function(){return t.previewIsActive()},setAnswerToDisplay:function(e){n=e},getAnswerToDisplay:function(){return n}}}),hellobar.defineModule("base.sanitizing",[],function(){function e(t,n){for(var i in t)t.hasOwnProperty(i)&&t[i]&&(!t[i].replace||n&&n.indexOf(i)>=0?Array.isArray(t[i])||(t[i]=e(t[i])):t[i]=t[i].replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"));return t}return{sanitize:e}}),hellobar.defineModule("base.selfcheck",["hellobar","base.preview","base.format","base.site"],function(e,t,n,i){function o(){return window.location}function r(e){return!!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}return{scriptIsInstalledProperly:function(){if(t.isActive())return!0;var e=o().hostname;return!(!r(e)&&"localhost"!==e)||("http://mysite.com"===i.siteUrl()||n.normalizeUrl(e)===n.normalizeUrl(i.siteUrl()))}}}),hellobar.defineModule("base.serialization",[],function(){function e(e){return(e+"").replace(/[\^\|\,\;\n\r]/g," ")}function t(e){return parseInt(e,10)==e?e=parseInt(e,10):parseFloat(e)==e&&(e=parseFloat(e)),e}return{serialize:function(t){if(!t)return"";var n=[];for(var i in t){var o=t[i];"function"!=typeof o&&"object"!=typeof o&&n.push(e(i).replace(/:/g,"-")+":"+e(o))}return n.join("|")},deserialize:function(e){if(!e)return{};for(var n=e.split("|"),i={},o=0;o<n.length;o++){var r=n[o].split(":"),a=r[0],l=r.slice(1,r.length).join(":");i[a]=t(l)}return i}}}),hellobar.defineModule("base.site",["hellobar"],function(e){var t=e.createModuleConfiguration({siteId:"number",siteUrl:"string",secret:"string"});return{configuration:function(){return t},siteId:function(){return t.siteId()},siteUrl:function(){return t.siteUrl()},secret:function(){return t.secret()}}}),hellobar.defineModule("base.storage",[],function(){function e(){function e(e){return e.toISOString()}function t(){return e(new Date)}function n(t){var n;return t instanceof Date?n=t:"number"==typeof t?(n=new Date,n.setDate(n.getDate()+t)):(n=new Date,n.setDate(n.getDate()+365)),e(n)}this.setValue=function(e,t,i){localStorage.setItem(e,JSON.stringify({value:t,expiration:n(i)}))},this.getValue=function(e){var n=localStorage.getItem(e);if(n){var i=JSON.parse(n);if(i.expiration>t())return i.value;this.removeValue(e)}return undefined},this.removeValue=function(e){return localStorage.removeItem(e)}}var t=new e;return{setValue:function(e,n,i){t.setValue(e,n,i)},getValue:function(e){return t.getValue(e)},removeValue:function(e){return t.removeValue(e)}}}),hellobar.defineModule("base.styling",["hellobar"],function(e){function t(){if(n.externalCSS()){var e=document.createElement("STYLE");e.type="text/css",e.styleSheet?e.styleSheet.cssText=n.externalCSS():e.appendChild(document.createTextNode(n.externalCSS()));document.getElementsByTagName("HEAD")[0].appendChild(e)}}var n=e.createModuleConfiguration({externalCSS:"string"});return{configuration:function(){return n},initialize:function(e){e&&e(n),t()}}}),hellobar.defineModule("base.templating",["hellobar","base.preview"],function(hellobar,preview){function getTemplateByName(e){return templates[e]}function renderTemplate(e,t){return e.replace(/\{\{(.*?)\}\}/g,function(e,n){return parseTemplateVar(n,t)})}function parseTemplateVar(value,context){var siteElement=context&&context.siteElement?context.siteElement:context;try{value=eval(value)}catch(e){preview.isActive()&&console.log("Templating error: ",e)}return value===undefined||null===value?"":value}var templates={},_configuration={addTemplate:function(e,t){templates[e]=t}};return{configuration:function(){return _configuration},inspect:function(){return{allTemplates:function(){return templates}}},getTemplateByName:getTemplateByName,renderTemplate:renderTemplate}}),hellobar.defineModule("base.timezone",["hellobar"],function(e){function t(e){if(!e||"string"!=typeof e)return null;if("+"!=e[0]&&"-"!=e[0]&&(e="+"+e),e.indexOf(":")==-1&&(e=e.slice(0,e.length-2)+":"+e.slice(e.length-2)),!e.match(/^[\+-]\d{1,2}:\d\d$/))return null;var t=e.split(":"),n="+"==e[0]?1:-1;return(60*Math.abs(parseInt(t[0],10))*60+60*parseInt(t[1],10))*n}function n(e){e||"string"!=typeof i.defaultTimezone()||(e=i.defaultTimezone());var n=t(e);if(null===n)return new Date;var o=new Date;return new Date(o.getTime()+60*o.getTimezoneOffset()*1e3+1e3*n)}var i=e.createModuleConfiguration({defaultTimezone:"string"});return{nowInTimezone:n}}),hellobar.defineModule("autofills",["hellobar","base.storage","base.dom","base.bus"],function(e,t,n,i){function o(){function e(e){return"HB-autofill-"+e.id}this.save=function(n,i){t.setValue(e(n),i,30)},this.restore=function(n){return t.getValue(e(n))}}function r(e,t){return e.querySelectorAll(t)||[]}function a(e){(d.autofills()||[]).forEach(function(t){e&&e(t)})}function l(e){return h.filter(function(t){return t.element===e}).length>0}function s(){function e(e){a(function(t){var n=r(e,t.listen_selector);Array.prototype.forEach.call(n,function(e){if(!l(e)){var n=function(e){if(e&&e.target){var n=e.target.value;m.save(t,n)}},i="blur";e.addEventListener(i,n),h.push({event:i,handler:n,element:e})}})})}n.forAllDocuments(function(t){e(t)})}function u(){h.forEach(function(e){e.element.removeEventListener(e.event,e.handler)}),h=[]}function c(){a(function(e){var t=m.restore(e);t&&n.forAllDocuments(function(n){var i=r(n,e.populate_selector);Array.prototype.forEach.call(i,function(e){e.value=t})})})}function f(){c(),s()}var d=e.createModuleConfiguration({autoRun:{type:"boolean",defaultValue:!0},autofills:{type:Array,defaultValue:[]}}),h=[],m=new o,p=function(){setTimeout(function(){f()},1)};return{configuration:function(){return d},initialize:function(e){e&&e(d),d.autoRun()&&n.runOnDocumentReady(function(){f(),i.on("hellobar.elements.viewed",p)})},run:function(){f()},finalize:function(){u()}}}),hellobar.defineModule("contentUpgrades",["hellobar","base.templating","base.format","elements.collecting","elements.conversion","contentUpgrades.class","base.bus","base.dom","elements.data","base.cdn"],function(e,t,n,i,o,r,a,l,s,u){function c(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=w.contentUpgrades()[i];o&&t.push(o)}return t}function f(e){for(var t=c(e),n=0;n<t.length;n++){var i=t[n].id;if(s.getData(i,b))return t[n]}var o=Math.floor(Math.random()*t.length),r=t[o];return r&&s.setData(r.id,b,1),r}function d(e){if(e&&e.getAttribute){var t=e.getAttribute("data-hb-cu-ab-test").split(","),n=f(t);n&&p(n.id,e)}}function h(){l.runOnDocumentReady(function(){if(window.addEventListener&&function(){var e=w.contentUpgrades(),t={};window.addEventListener("scroll",function(){for(var n in e){v(document.getElementById("hb-cu-offer-"+n))&&!t[n]&&(o.viewed(e[n]),t[n]=!0)}})}(),document.querySelectorAll)for(var e=document.querySelectorAll("[data-hb-cu-ab-test]"),t=0;t<e.length;t++)d(e[t])})}function m(e){var t=(w.contentUpgrades()||{})[e];if(t)return new r(t)}function p(e,n){var i=m(e);if(i){var o=w.styles()||{},r=t.getTemplateByName("contentupgrade"),a=t.renderTemplate(r,{siteElement:i.model(),siteStyles:o});u.addCss("https://fonts.googleapis.com/css?family="+o.offer_font_family_name,document),n||(n=document.getElementById("hb-cu-"+e)),n.outerHTML=a}}function v(e){if(!e)return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||n.clientHeight)&&t.right<=(window.innerWidth||n.clientWidth)}function g(e){var t=m(e);t&&(o.clicked(t),document.getElementById("hb-cu-modal-"+t.model().id).style.display="inline")}function y(e){var t=m(e),n=document.getElementById("hb-fields-form"),o=document.getElementById("hb_msg_container")||document.getElementsByClassName("hb-headline-text")[0],r=t.model(),l=r.download_link,s=!!r.thank_you_enabled;a.on("hellobar.elements.emailSubmitted",function(){s&&t.showThankYou()}),i.submitEmail(t,n,o,"",!0,l)}var b="ab",w=e.createModuleConfiguration({contentUpgrades:"object",styles:"object"});return{configuration:function(){return w},run:h,show:p,view:g,submit:y}});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();hellobar.defineModule("contentUpgrades.class",[],function(){return function(){function e(t){_classCallCheck(this,e),this._model=t}return _createClass(e,[{key:"model",value:function(){return this._model}},{key:"contentDocument",value:function(){return document.getElementById("hb-cu-modal-"+this.model().id)}},{key:"getSiteElementDomNode",value:function(){return this.contentDocument()}},{key:"getMainContainer",value:function(){var e=this.getSiteElementDomNode();return e&&e.querySelector(".hb-cu-main-content")}},{key:"getThankYouContainer",value:function(){var e=this.getSiteElementDomNode();return e&&e.querySelector(".hb-cu-thank-you")}},{key:"showThankYou",value:function(){var e=this.getMainContainer(),t=this.getThankYouContainer();e&&t&&(e.style.display="none",t.style.display="block")}}]),e}()}),hellobar.defineModule("rules.conditions",["base.format","base.timezone","base.deferred","visitor","geolocation"],function(e,t,n,i,o){function r(e,t){
return f(e,t.operand,t.value,t.segment)}function a(e){var n=parseInt(e.value[0]),i=parseInt(e.value[1]),o=e.timezone_offset,r=t.nowInTimezone(o);return!!d(r.getHours(),e.operand,n,e.segment)||r.getHours()===n&&d(r.getMinutes(),e.operand,i,e.segment)}function l(e){var t=p(e.segment);return n.wrap(t).then(function(t){return r(t,e)})}function s(e){return o.getGeolocationData().then(function(t){var n=t.region,i=t.regionName;return r(n,e)||r(i,e)})}function u(e){return"gl_rgn"===e.segment?s(e):l(e)}function c(t,n,i){if("pu"===t||"pp"===t||"pup"===t){var o=/^\//.test(i);n=e.normalizeUrl(n,o)}return n}function f(e,t,n,i){if("object"==typeof n&&"number"==typeof n.length||(n=[n]),t.match(/not/)){for(var o=0;o<n.length;o++)if(!d(e,t,n[o],i))return!1;return!0}for(o=0;o<n.length;o++)if(d(e,t,n[o],i))return!0;return!1}function d(e,t,n,i){var o=c(i,e,n),r=c(i,n,n);switch(t){case"is":case"equals":if("string"==typeof o&&"string"==typeof r){var a=new RegExp("^"+m(r).replace("*",".*")+"$");return!!o.match(a)}return o==r;case"every":return o%r==0;case"is_not":case"does_not_equal":return o!=r;case"includes":if(void 0===o&&""===r)return!1;if("string"==typeof o&&"string"==typeof r){var a=new RegExp(m(r).replace("*",".*"));return!!o.match(a)}return h(o).indexOf(h(r))!=-1;case"does_not_include":return void 0===o&&""===r||h(o).indexOf(h(r))==-1;case"before":case"less_than":return o<r;case"less_than_or_equal":return o<=r;case"after":case"greater_than":return o>r;case"greater_than_or_equal":return o>=r;case"between":case"is_between":return o>=r[0]&&o<=r[1]}}function h(e){return(e+"").toLowerCase()}function m(e){return e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&")}function p(e){return"url"===e?e="pu":"device"===e?e="dv":"country"===e?e="co":"referrer"===e||"referer"===e?e="rf":"date"===e&&(e="dt"),i.getData(e)}function v(e){var t=undefined,n=undefined;if("pq"===e.segment){var i=e.value.split("=")[0];t=p(e.segment)[i],n=e.value.split("=")[1]||""}else{if("tc"===e.segment)return a(e);if(e.segment.indexOf("gl_")!==-1)return u(e);t=p(e.segment),n=e.value}return"between"===e.operand?d(t,e.operand,n,e.segment):f(t,e.operand,n,e.segment)}return{resolve:v}}),hellobar.defineModule("rules.resolving",["base.format","base.timezone","base.deferred","visitor","geolocation","rules.conditions"],function(e,t,n,i,o,r){function a(e){var t=e.conditions.map(function(e){return r.resolve(e)}),i=function(t){return"any"===e.matchType&&t.filter(function(e){return e===!0}).length>0?{rule:e,ruleActive:!0}:"any"!==e.matchType&&t.filter(function(e){return e===!1}).length>0?{rule:e,ruleActive:!1}:undefined},o=i(t);return o!==undefined?o:n.all(t.map(function(e){return e instanceof n.Promise?e:n.constant(e)})).then(function(t){var n=i(t);return n!==undefined?n:"any"===e.matchType&&e.conditions.length>0?{rule:e,ruleActive:!1}:{rule:e,ruleActive:!0}})}return{resolve:a}}),hellobar.defineModule("rules",["base.deferred","elements.visibility","elements.relevance","rules.resolving"],function(e,t,n,o){function r(){var t=f.map(function(t){if(t.siteElements.length>0){var n=o.resolve(t);return e.wrap(n)}return e.constant({rule:t,ruleActive:!1})});return e.all(t)}function a(e){var t=e.type;return"Modal"!==t&&"Takeover"!==t||(t="Modal/Takeover"),t}function l(e){var t={};return e.forEach(function(e){e.siteElements.forEach(function(e){var n=a(e);t[n]||(t[n]=[]),t[n].push(e)})}),t}function s(e){var o=e.filter(function(e){return e.ruleActive}).map(function(e){return e.rule}),r=l(o),a=[],s=["Modal/Takeover","Alert","Slider","Bar"];for(i=0;i<s.length;i++){var u=s[i],c=r[u];c&&(siteElement=n.getBestElement(c),siteElement&&t.shouldShowElement(siteElement)&&a.push(siteElement))}return a}function u(){var e,t;if(null!=window.HB_element_id)for(e=0;e<f.length;e++){var n=f[e];for(t=0;t<n.siteElements.length;t++){var i=n.siteElements[t];if(i.wordpress_bar_id===window.HB_element_id)return i}}return null}function c(){var t=e(),n=u();return n?t.resolve([n]):r().then(function(e){var n=s(e);t.resolve(n)}),t.promise()}var f=[],d={addRule:function(e,t,n){"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]);var i={matchType:e,conditions:t,siteElements:n};f.push(i);for(var o=0;o<n.length;o++)n[o].rule=i}};return{configuration:function(){return d},inspect:function(){return{allRules:function(){return f},allElementModels:function(){return f.map(function(e){return e.siteElements}).reduce(function(e,t){return e.concat(t)},[])},resolveRules:r}},apply:c}});var _get=function(e,t,n){for(var i=!0;i;){var o=e,r=t,a=n;i=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,r);if(l!==undefined){if("value"in l)return l.value;var s=l.get;return s===undefined?undefined:s.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return undefined;e=u,t=r,n=a,i=!0,l=u=undefined}},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();hellobar.defineModule("elements.class.alert",["hellobar","base.dom","base.cdn","base.cdn.libraries","base.site","base.format","base.templating","base.preview","base.coloring","elements.injection","elements.visibility","elements.intents","elements.conversion","elements.class"],function(e,t,n,i,o,r,a,l,s,u,c,f,d,h){function m(){var e=document.createElement("iframe");return e.src="about:blank",e.id=o.secret()+"-container",e.className="HB-Alert",e.name=e.id,t.hideElement(e),e}function p(e,t,n){var i=function(){return t?"<style>"+t.split("hellobar-logo-wrapper").join("hellobar-logo-wrapper_"+o.secret())+"</style>":""},r=function(){return"<html><head>"+i()+"</head><body>"+n+"</body></html>"},a=e.contentDocument;a.open(),a.write(r()),a.close(),a.body.className="alert"}function v(e,n){n.animated&&t.addClass(e,"hb-animated"),n.theme&&n.theme_id&&t.addClass(e,n.theme_id)}function g(e){t.setStyles(e,{display:"block",position:"absolute",width:"100%",height:"100%",maxHeight:"none",top:0,bottom:0,left:0,right:0})}function y(e,n){var i=n.isVisible(),o=n.isPopupVisible(),r=n._model.placement,a=function(){var i=b.offset+"px",a=b.maxPopupWidth,l=b.triggerWidth+2,s=n.contentDocument().querySelector("#hellobar-slider").clientHeight;t.setStyles(e,{display:"block",position:"fixed",left:"bottom-right"===r?"auto":i,right:"bottom-right"===r?i:"auto",width:(o?a:l)+"px",top:"auto",bottom:i,height:(o?s+124:l)+"px",border:"none"}),t.addClass(e,"hb-animateIn")},l=function(){t.setStyles(e,{display:"none"})};i?a():l()}var b={offset:10,triggerWidth:60,maxPopupWidth:500},w=function(){function e(t,n){var i=this;_classCallCheck(this,e),this._domNode=t.contentDocument.getElementById("hb-trigger"),this._model=n,this._clickListener=null,this._onClick=function(){i._clickListener&&i._clickListener()},this._subscribe(),this.showMainIcon()}return _createClass(e,[{key:"setClickListener",value:function(e){this._clickListener=e}},{key:"_subscribe",value:function(){this._domNode.addEventListener("click",this._onClick)}},{key:"_unsubscribe",value:function(){this._domNode.removeEventListener("click",this._onClick)}},{key:"_mainIconDomNode",value:function(){return this._domNode.querySelector(".js-main-icon")}},{key:"_closeIconDomNode",value:function(){return this._domNode.querySelector(".js-close-icon")}},{key:"showMainIcon",value:function(){t.hideElement(this._closeIconDomNode(),"inline-block"),t.showElement(this._mainIconDomNode(),"inline-block")}},{key:"showCloseIcon",value:function(){t.hideElement(this._mainIconDomNode(),"inline-block"),t.showElement(this._closeIconDomNode(),"inline-block")}},{key:"adjustSize",value:function(){var e=this,n=function(){var n=l.isActive()?b.offset+"px":0,i=function(){t.setStyles(e._domNode,{left:n,bottom:n,top:"auto",right:"auto"})},o=function(){t.setStyles(e._domNode,{left:"auto",bottom:n,top:"auto",right:n})};"bottom-right"===e._model.placement?o():i()},i=function(){var n=e._model.trigger_color&&"ffffff"===e._model.trigger_color.toLowerCase()?"1px solid #"+e._model.trigger_icon_color:"none";t.setStyles(e._domNode,{border:n})};n(),i()}},{key:"animate",value:function(){var e=this._domNode.querySelector(".js-main-icon");t.removeClass(e,"animated"),setTimeout(function(){t.addClass(e,"animated"),e&&e.addEventListener("animationend",function(){return t.removeClass(e,"animated")},!1)})}},{key:"remove",value:function(){this._unsubscribe()}}]),e}(),_=function(){function e(t,n){_classCallCheck(this,e),this._domNode=t.contentDocument.getElementById("hellobar-slider"),this._model=n}return _createClass(e,[{key:"adjustSize",value:function(){var e=this;!function(){var n=(l.isActive()?b.offset:0)+3+"px",i=(l.isActive()?10:0)+(b.offset+b.triggerWidth+b.offset)+"px",o=b.maxPopupWidth-6+"px",r=function(){t.setStyles(e._domNode,{top:"auto",left:n,bottom:i,maxWidth:o})},a=function(){t.setStyles(e._domNode,{right:n,top:"auto",bottom:i,maxWidth:o})};"bottom-right"===e._model.placement?a():r()}()}},{key:"show",value:function(){t.showElement(this._domNode)}},{key:"hide",value:function(){t.hideElement(this._domNode)}},{key:"remove",value:function(){}}]),e}(),k=function(){function e(t,n){_classCallCheck(this,e),this._domNode=t.contentDocument.getElementsByTagName("audio")[0],this._model=n}return _createClass(e,[{key:"play",value:function(){"none"!==this._model.sound&&this._domNode.play()}}]),e}(),C=function(){function e(t){_classCallCheck(this,e),this._element=t,this._wasConverted=!1,this._wasViewed=!1}return _createClass(e,[{key:"converted",value:function(){this._wasConverted||(d.converted(this._element),this._wasConverted=!0)}},{key:"viewed",value:function(){this._wasViewed||(d.viewed(this._element),this._wasViewed=!0)}}]),e}();return function(o){function r(e){var t=this;_classCallCheck(this,r),_get(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this._model=e,this._isPopupVisible=!1,this._isVisible=!1,this._isNotified=!1,this._onCtaClicked=function(e){t._conversionHelper.converted(),e.preventDefault(),e.stopPropagation()}}return _inherits(r,o),_createClass(r,[{key:"model",value:function(){return this._model}},{key:"contentDocument",value:function(){return this._iframe.contentDocument}},{key:"attach",value:function(){var o=this,r=function(){var e=a.getTemplateByName(o._model.template_name);return a.renderTemplate(e,{siteElement:o})},s=function(e){i.useFontAwesome(e),l.isActive()&&i.useFroala(e),o._model.google_font&&n.addCss("https://fonts.googleapis.com/css?family="+o._model.google_font,o._iframe.contentDocument)},c=function(){var e=o._iframe.contentDocument.querySelector(".js-cta");e&&e.addEventListener("click",o._onCtaClicked)},d=function(){o._isNotified=!0,o._isPopupVisible?o.hidePopup():o.showPopup()},h=function(){o._iframe=m(o._model.type),u.inject(o._iframe),p(o._iframe,o._css,r()),v(o._iframe,o._model),o._iframe.contentWindow.hellobar=e,l.isActive()&&t.addClass(o._iframe.contentDocument.body,"preview-mode"),o._model.theme&&t.addClass(o._iframe.contentDocument.body,o._model.theme_id),s(o._iframe.contentDocument),o._trigger=new w(o._iframe,o._model),o._popup=new _(o._iframe,o._model),o._audio=new k(o._iframe,o._model),o._conversionHelper=new C(o),o._trigger.setClickListener(d),o.adjustSize(),c(),f.applyViewCondition(o._model.view_condition,function(){o.show();var e=1500;o._model.notification_delay>0&&(e+=1e3*o._model.notification_delay),setTimeout(function(){o.notify()},e)},function(){o.show()}),o.onInit&&o.onInit()};t.runOnDocumentReady(function(){setTimeout(function(){h(),l.isActive()&&o.showPopup()},1)})}},{key:"adjustSize",value:function(){l.isActive()?g(this._iframe):y(this._iframe,this),this._trigger.adjustSize(),this._popup.adjustSize()}},{key:"_domNodeById",value:function(e){return this._iframe.contentDocument.getElementById(e)}},{key:"_elementDomNode",value:function(){return this._domNodeById("hellobar-alert")}},{key:"_popupContainerDomNode",value:function(){return this._domNodeById("hb-popup-container")}},{key:"setCSS",value:function(e){this._css=e}},{key:"isPopupVisible",value:function(){return this._isPopupVisible}},{key:"close",value:function(){this.hidePopup()}},{key:"showPopup",value:function(){this._isPopupVisible=!0,this._trigger.showCloseIcon(),t.showElement(this._popupContainerDomNode(),"block"),this.adjustSize(),this._conversionHelper.viewed(),this.onShowPopup&&this.onShowPopup()}},{key:"hidePopup",value:function(){this._isPopupVisible=!1,this._trigger.showMainIcon(),t.hideElement(this._popupContainerDomNode(),"block"),this.adjustSize(),this.onHidePopup&&this.onHidePopup()}},{key:"isVisible",value:function(){return this._isVisible}},{key:"show",value:function(){this._isVisible||(this._isVisible=!0,this.adjustSize())}},{key:"hide",value:function(){this._isVisible&&(this._isVisible=!1,this.adjustSize())}},{key:"notify",value:function(){this._isNotified||(this._isNotified=!0,c.setVisibilityControlCookie("dismiss",this),this._audio.play(),this._trigger.animate())}},{key:"remove",value:function(){var e=this;(function(){if(e._iframe){var t=e._iframe.contentDocument.querySelector(".js-cta");t&&t.removeEventListener("click",e._onCtaClicked)}})(),this._trigger&&this._trigger.remove(),this._popup&&this._popup.remove(),this._iframe&&this._iframe.remove(),this.onRemove&&this.onRemove()}},{key:"cssClasses",value:function(){var e=this;return{brightness:function(){return s.colorIsBright(e._model.background_color)?"light":"dark"}}}},{key:"onInit",value:function(){}},{key:"onShowPopup",value:function(){}},{key:"onHidePopup",value:function(){}},{key:"onRemove",value:function(){}},{key:"id",get:function(){return this._model.id}}]),r}(h)});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function(e,t,n){for(var i=!0;i;){var o=e,r=t,a=n;i=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,r);if(l!==undefined){if("value"in l)return l.value;var s=l.get;return s===undefined?undefined:s.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return undefined;e=u,t=r,n=a,i=!0,l=u=undefined}};hellobar.defineModule("elements.class.bar",["base.dom","base.format","base.environment","elements.class","elements.injection","elements.visibility"],function(e,t,n,i,o,r){var a=null;return function(i){function l(e){_classCallCheck(this,l),_get(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,e)}return _inherits(l,i),_createClass(l,[{key:"setupIFrame",value:function(n){_get(Object.getPrototypeOf(l.prototype),"setupIFrame",this).call(this,n),e.addClass(n,"hb-"+this.size),e.addClass(n,"hb-"+this.placement),e.addClass(n,t.asBool(this.remains_at_top)?" remains-in-place":""),this.animated&&e.addClass(n,"hellobar"),n.scrolling="no",n.setAttribute("frameBorder",0),a&&a.parentNode.removeChild(a),a=null,t.asBool(this.pushes_page_down)&&(a=document.createElement("div"),a.id="hellobar-pusher",a.className="hb-"+this.size,"none"===this.w.style.display&&(a.style.height=0),o.inject(a,"bar-bottom"===this.placement))}},{key:"minimize",value:function(){e.animateOut(this.w,this.onHidden()),a&&(a.style.display="none"),e.animateIn(this.pullDown)}},{key:"onClosed",value:function(){a&&(a.style.display="none"),_get(Object.getPrototypeOf(l.prototype),"onClosed",this).call(this)}},{key:"onHidden",value:function(){r.setVisibilityControlCookie("dismiss",this)}},{key:"attach",value:function(){this.wiggle_button&&!n.isMobileSafari()?this.wiggle="wiggle":this.wiggle="",_get(Object.getPrototypeOf(l.prototype),"attach",this).call(this)}},{key:"performElementTypeSpecificAdjustment",value:function(){var n=this.getSiteElementDomNode();if(a){if("none"===this.w.style.display)return;var i=t.asBool(this.show_border?3:0);a.style.height=n.clientHeight+i+"px"}var o=this.w.className.indexOf("regular")>-1?32:52;e.setClass(n,"multiline",n.clientHeight>o)}},{key:"onPullDownSet",value:function(){this.pushes_page_down&&a&&e.showElement(a,"")}},{key:"barSizeCssClass",value:function(){var e=this.size;if("large"===e||"regular"===e)return e;var t=parseInt(e);return t<40?"regular":t>=40&&t<70?"large":"x-large"}},{key:"barHeight",value:function(){var e=this.size;switch(e){case"large":return"50px";case"regular":return"30px";default:return e+"px"}}}]),l}(i)});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();hellobar.defineModule("elements.class",["hellobar","base.templating","base.dom","base.cdn","base.cdn.libraries","base.site","base.environment","base.preview","base.coloring","base.format","base.capabilities","base.bus","elements.visibility","elements.collecting","elements.intents","elements.injection","elements.conversion"],function(e,t,n,i,o,r,a,l,s,u,c,f,d,h,m,p,v){var g={"hellobar-bar":"bar","hellobar-modal":"modal","hellobar-slider":"slider","hellobar-takeover":"takeover"},y=null;return function(){function b(e){_classCallCheck(this,b);for(var t in e)this[t]=e[t]}return _createClass(b,[{key:"frameName",value:function(){return r.secret()+"-container-"+this.pageIndex}},{key:"setupIFrame",value:function(e){this.animated&&n.addClass(e,"hb-animated"),this.theme_id&&n.addClass(e,this.theme_id),this.view_condition.indexOf("intent")!==-1&&m.initializeIntentListeners(),this.checkForDisplaySetting()}},{key:"imagePlacementClass",value:function(){return this.model().image_url||this.useDefaultImage()?"image-"+this.model().image_placement:""}},{key:"useDefaultImage",value:function(){var e=this.model().theme;if(this.model().use_default_image&&e&&e.image)return!!this.model().theme.image.default_url}},{key:"imageFor",value:function(e,t){function n(){if(r&&e===o.theme.image.position_default)return o.theme.image.default_url}function i(){return o["image_"+(o.image_style||"modal")+"_url"]||o.image_url||n()}var o=this.model(),r=this.useDefaultImage();t=t||{};var a=e===o.image_placement;if(n()||o.image_url&&a){if("background"===o.image_placement)return'\n            <div class="hb-image-wrapper '+o.image_placement+'" style="opacity: '+o.image_opacity/100+"; background-image: url("+i()+');"></div>\n          ';var l=[];return(!t.themeType||"generic"===t.themeType)&&l.push("uploaded-image"),t.classes&&l.push(t.classes),'\n            <div class="hb-image-wrapper '+o.image_placement+'">\n                <div class="hb-image-holder hb-editable-block hb-editable-block-image">\n                    <img style="opacity: '+o.image_opacity/100+';" class="'+l.join(" ")+'" src="'+i()+'" />\n                </div>\n            </div>\n          '}return""}},{key:"blockContent",value:function(e){for(var t=this.blocks||[],n=null,i=0;i<t.length;i++)t[i].id===e&&(n=t[i]);return n&&n.content?n.content:{}}},{key:"setCSS",value:function(e){this.css=e}},{key:"attach",value:function(){var e=this;a.isIEXOrLess(9)&&(this.animated=!1);var i=function(){var n=function(){if(e.theme&&"template"===e.theme.type){var n=e.type.toLowerCase()+"_"+e.theme_id.replace(/\-/g,"_");return t.getTemplateByName(n)}return t.getTemplateByName(e.template_name)};return t.renderTemplate(n(),{siteElement:e})},r=i();n.runOnDocumentReady(function(){setTimeout(function(){this.injectSiteElementHTML(r),this.setIosKeyboardHandlers(),this.setPullDown(),this.hideOnZoom(),this.wiggle_button.length>0&&n.wiggleEventListeners(this.w),this.loadFonts(),this.useGoogleFont(),l.isActive()&&(this.w.contentDocument.querySelector(".js-branding").addEventListener("click",function(e){return e.preventDefault()}),o.useFroala(this.w.contentDocument))}.bind(this),1)}.bind(this))}},{key:"injectSiteElementHTML",value:function(t){var i=this,o=this;this.w&&this.w.parentNode&&this.w.parentNode.removeChild(this.w);var s=document.querySelector("#pull-down.se-"+this.id);s&&s.parentNode.removeChild(s),this.w=document.createElement("iframe"),this.w.src="about:blank",this.w.id=r.secret()+"-container",this.w.className="HB-"+this.type,this.w.name=this.frameName(),n.hideElement(this.w),this.setupIFrame(this.w);var u=function(){return i.css?"<style>"+i.css.split("hellobar-logo-wrapper").join("hellobar-logo-wrapper_"+r.secret())+"</style>":""};p.inject(this.w);var c=this.w.contentWindow.document;c.open(),c.write("<html><head>"+u()+"</head><body>"+t+"</body></html>"),c.close(),c.body.className=this.type,this.w.contentWindow.hellobar=e,this.theme_id&&n.addClass(c.body,this.theme_id),l.isActive()&&n.addClass(c.body,"preview-mode"),a.isIEXOrLess(9)&&n.addClass(c.body,"hb-old-ie"),a.isIE11()&&n.addClass(c.body,"hb-paused-animations-ie");var f=function(){o.adjustForCurrentWidth()};setTimeout(f,1),this.adjustmentInterval=setInterval(f,500),this.onWindowResize=function(){o.adjustForCurrentWidth()}.bind(this),window.addEventListener("resize",this.onWindowResize)}},{key:"adjustForCurrentWidth",value:function(){var e=this.getSiteElementDomNode();if(e&&e.clientHeight){var t=a.isMobileWidth(this);n.setClass(e,"mobile",t),this.setContainerSize(this.w,e,this.type,t),this.performElementTypeSpecificAdjustment&&this.performElementTypeSpecificAdjustment()}}},{key:"setContainerSize",value:function(e,t,n){if(e)if(l.isActive())e.style.display="block",e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.maxHeight="none",e.style.top=0,e.style.bottom=0,e.style.left=0,e.style.right=0;else if("Bar"===n)e.style.maxHeight=t.clientHeight+8+"px";else if("Slider"===n){var i=window.innerWidth,o=Math.min(404,i-24);e.style.width=o+"px",e.style.height=t.clientHeight+124+"px"}}},{key:"getSiteElementDomNode",value:function(){var e;if(this.w&&this.w.contentDocument){for(var t in g)if(e=this.w.contentDocument.getElementById(t))return e;if(e=this.w.contentDocument.getElementById("hellobar-template"))return e}return null}},{key:"checkForDisplaySetting",value:function(){var e=this,t=l.isActive()?"preview":this.view_condition,i=function(){var t=function(){clearInterval(e.displayCheckInterval),n.showElement(e.w),e.dontRecordView||v.viewed(e);var t=e.getSiteElementDomNode();t&&(t.style.display="none",setTimeout(function(){t.style.display=""},10)),e.w.className.indexOf("hb-animated")>-1&&n.animateIn(e.w)};e.w.className.indexOf("hb-animated")>-1?setTimeout(t,500):t()},o=function(){n.hideElement(e.w),e.pullDown&&n.animateIn(e.pullDown)};this.displayCheckInterval=m.applyViewCondition(t,i,o)}},{key:"hideOnZoom",value:function(){if(window.addEventListener&&window.outerWidth&&window.innerWidth){var e=this.w.style.position,t=function(t){var n=(window.outerWidth-8)/window.innerWidth;if(t.scale)this.w.style.position=t.scale<=1.03?e:"absolute";else if("undefined"!=typeof window.orientation){if(window.outerWidth<=480&&n<=1.3)return this.w.style.position=e;this.w.style.position=n<=.6?e:"absolute"}else"Slider"==this.type||(this.w.style.position=n<=1.3?e:"absolute")}.bind(this);window.addEventListener("gesturechange",t),window.addEventListener("scroll",t)}}},{key:"remove",value:function(){return this.onWindowResize&&window.removeEventListener("resize",this.onWindowResize),this.adjustmentInterval&&clearInterval(this.adjustmentInterval),null!=this.w&&null!=this.w.parentNode&&(this.w.parentNode.removeChild(this.w),!0)}},{key:"close",value:function(){l.isActive()||n.animateOut(this.w,this.onClosed.bind(this))}},{key:"onClosed",value:function(){this.remove()&&d.setVisibilityControlCookie("dismiss",this),f.trigger("hellobar.elements.closed",this)}},{key:"setPullDown",value:function(){if(this.closable){var e=document.createElement("div");e.id="pull-down",e.style.backgroundColor="#"+this.background_color,e.className="hb-"+this.size+" hellobar hb-"+this.placement+" se-"+this.id,s.colorIsBright(this.primary_color)&&(e.className+=" inverted");var t=document.createElement("div");t.className="hellobar-arrow",t.onclick=function(){n.animateIn(this.w),n.animateOut(this.pullDown),d.removeVisibilityControlCookie("dismiss",this.id),this.onPullDownSet&&this.onPullDownSet()}.bind(this),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="11px" height="11px" viewBox="43.6 92.5 315 315"><path d="M49.6 92.5c-3.3 0-6 2.7-6 6v303c0 3.3 2.7 6 6 6h303c3.3 0 6-2.7 6-6v-303c0-3.3-2.7-6-6-6H49.6zM229.6 254.3c-3.3 0-6 2.7-6 6V360c0 3.3-2.7 6-6 6h-33c-3.3 0-6-2.7-6-6v-99.7c0-3.3-2.7-6-6-6H99.2c-3.3 0-4.2-2-2-4.5l99.9-111.4c2.2-2.5 5.8-2.5 8 0l99.9 111.4c2.2 2.5 1.3 4.5-2 4.5H229.6z"/></svg>',e.appendChild(t),p.inject(e),this.pullDown=e}}},{key:"setIosKeyboardHandlers",value:function(){if(a.isMobileSafari())for(var e=this.w.contentDocument.getElementsByTagName("input"),t=0;t<e.length;t++)e[t].addEventListener("focus",this.iosKeyboardShow.bind(this)),e[t].addEventListener("blur",this.iosKeyboardHide.bind(this))}},{key:"iosKeyboardShow",value:function(e){e.preventDefault();var t=this;"Bar"==this.type?y=setTimeout(function(){window.scrollTo(0,t.w.offsetTop)},500):"Slider"==this.type?(this.w.style.position="fixed",y=setInterval(function(){t.w.style.left=window.pageXOffset+"px",t.w.style.top=window.pageYOffset+"px"},200)):"Takeover"!=this.type&&"Modal"!=this.type||this.updateStyleFor(!1)}},{key:"iosKeyboardHide",value:function(e){e.preventDefault(),null!=y&&(clearInterval(y),y=null),"Takeover"!=this.type&&"Modal"!=this.type&&"Slider"!=this.type||this.updateStyleFor(!0)}},{key:"updateStyleFor",value:function(e){var t=this,n=t.w.contentDocument,i=n.getElementById("hellobar-modal")||n.getElementById("hellobar-takeover");return e?(this.w.style.position="",this.w.style.height="",this.w.style.maxHeight="",this.w.style.width="",this.w.style.left="",this.w.style.top="",this.w.style["-webkit-transform"]="",i.style.position="",i.style.overflowY="",i.style.maxHeight="",i.style.height="",i.style.top="",i.style.left="",i.style.transform="",i.style.width=""):("Slider"==this.type?t.w.style.position="fixed":t.w.style.position="absolute",y=setInterval(function(){t.w.style.height=window.innerHeight+"px",t.w.style.maxHeight=window.innerHeight+"px",t.w.style.width=window.innerWidth+"px",t.w.style.left="0",t.w.style.top="0",t.w.style["-webkit-transform"]="scale(0.9)",i!=undefined&&null!=i&&(i.style.position="absolute",i.style.overflowY="scroll",i.style.maxHeight="100%",i.style.height="100%",i.style.top="0",i.style.left="0",i.style.transform="none",i.style.width="100%")},500),i.scrollIntoView(),n.getElementsByClassName("hb-content-wrapper")[0].scrollIntoView(),window.scrollTo(0,window.innerHeight/2)),!1}},{key:"converted",value:function(){v.converted(this)}},{key:"useGoogleFont",value:function(){if(this.google_font&&(i.addCss("https://fonts.googleapis.com/css?family="+this.google_font,this.w.contentDocument),a.isMobileSafari())){var e=this.w.contentWindow.document.createElement("META");e.name="viewport",e.content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no",document.getElementsByTagName("HEAD")[0].appendChild(e)}}},{key:"loadFonts",value:function(){var e=this;this.fonts.forEach(function(t){i.addCss("https://fonts.googleapis.com/css?family="+t,e.w.contentDocument)})}},{key:"brightnessClass",value:function(){return this.getBrightness(this.background_color)<.25?"dark":"light"}},{key:"getBrightness",value:function(e){e=e||"";var t=[e[0]+e[1],e[2]+e[3],e[4]+e[5]];return t.forEach(function(e,n){var i=parseInt(e,16),o=i/255;t[n]=o<.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}),.2126*t[0]+.7152*t[1]+.0722*t[2]}},{key:"handleCtaClick",value:function(){return!l.isActive()&&(h.submitEmail(this,this.w.contentDocument.getElementById("hb-fields-form"),null,null,this.email_redirect,this.settings.redirect_url,"thank-you"),!1)}},{key:"thankYouMessage",value:function(){return this.unquotedValue("thank_you_text","Thank you for signing up!")}},{key:"unquotedValue",value:function(e,t){var n=this[e]||t;return n&&0===n.indexOf("'")?n.substring(1,n.length-1):n}},{key:"accountCssClass",value:function(){return this.use_free_email_default_msg?"free-account":"paid-account"}},{key:"brandingCssClass",value:function(){return u.asBool(this.show_branding)||!c.has("no_b")?"show-branding":"dont-show-branding"}},{key:"closableCssClass",value:function(){return this.closable?"closable":""}},{key:"questionOrAnswerIsShown",value:function(){return u.asBool(this.questionified)||l.getAnswerToDisplay()}},{key:"renderBranding",value:function(){var e=t.getTemplateByName("branding_animated");return t.renderTemplate(e,{siteElement:this})}},{key:"brandingName",value:function(){return"animated"}},{key:"shouldShowBranding",value:function(){return this.show_branding}},{key:"model",value:function(){return this}},{key:"contentDocument",value:function(){return this.w.contentDocument}}]),b}()});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function(e,t,n){for(var i=!0;i;){var o=e,r=t,a=n;i=!1,null===o&&(o=Function.prototype);var l=Object.getOwnPropertyDescriptor(o,r);if(l!==undefined){if("value"in l)return l.value;var s=l.get;return s===undefined?undefined:s.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return undefined;e=u,t=r,n=a,i=!0,l=u=undefined}};hellobar.defineModule("elements.class.slider",["base.dom","elements.class","elements.visibility"],function(e,t,n){return function(t){function i(e){_classCallCheck(this,i),_get(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,e)}return _inherits(i,t),_createClass(i,[{key:"setupIFrame",value:function(t){_get(Object.getPrototypeOf(i.prototype),"setupIFrame",this).call(this,t),e.addClass(t,"hb-"+this.placement)}},{key:"minimize",value:function(){e.animateOut(this.w,this.onHidden()),e.animateIn(this.pullDown)}},{key:"onHidden",value:function(){n.setVisibilityControlCookie("dismiss",this)}}]),i}(t)}),hellobar.defineModule("elements.collecting",["base.preview","base.format","base.dom","base.site","base.sanitizing","base.bus","tracking.internal","elements.conversion"],function(e,t,n,i,o,r,a,l){function s(t,n){function i(){var n="",i="text",r=null;switch(t.type){case"builtin-name":n=t.label||l.name_placeholder||"Name",r="name";break;case"builtin-email":n=t.label||l.email_placeholder||"Email",i=e.isActive()?"text":"email",r="email";break;case"builtin-phone":n=t.label||"Phone",i="tel",r="phone";break;default:n=o.sanitize({label:t.label}).label}return{label:n,type:i,name:r}}function r(){switch(t.type){case"builtin-email":return"builtin-email";case"builtin-phone":return"builtin-phone";default:return""}}function a(){return"builtin-email"===t.type?"f-builtin-email":"f-"+t.id}var l=n.model?n.model():n,s=i(),u=s.name?'name="'+s.name+'"':"",c='type="'+s.type+'"',f='placeholder="'+s.label+'"',d="builtin-email"===t.type?"required":"",h=e.isActive()?'value="'+s.label+'"':"",m=s.name?'autocomplete="on"':"";return'\n        <div class="hb-input-block hb-editable-block hb-editable-block-input '+r()+'" data-hb-editable-block="'+a()+'">\n          <label for="'+a()+'">'+s.label+'</label>\n          <input id="'+a()+'" '+c+" "+u+" "+f+" "+d+" "+h+" "+m+"/>\n        </div>\n      "}function u(e,o,a,l,s,u,d){var h=e.model(),m=o?o.querySelector("#f-builtin-email"):null;return c(m?m.value:"",function(){var o=t.asBool(s),c=undefined,p=e.contentDocument();if(!o){if(null!=a&&l){var v=p.getElementsByClassName("hb-cta")[0],g=v.getElementsByClassName("hb-text-holder")[0];if(h.use_free_email_default_msg){var y="http://www.hellobar.com?hbt=emailSubmittedLink&sid="+i.siteId();g.textContent="Click Here",v.href=y,v.setAttribute("target","_parent"),v.onclick=null,c=p.querySelectorAll(".hb-input-block, .hb-secondary-text")}else v.href="javascript:void(0)",g.textContent="Close",v.addEventListener("click",function(){return hellobar("elements").findById(e.id).close()}),c=p.querySelectorAll(".hb-input-block, .hb-secondary-text");a.innerHTML="<span>"+l+"</span>"}if(d&&n.addClass(e.getSiteElementDomNode(),d),c)for(var b=0;b<c.length;b++)n.hideElement(c[b])}var w=[];w.push(m.value);var _=p.querySelectorAll("input:not(#f-builtin-email)");if(_)for(var k=0;k<_.length;k++){var C=_[k];C&&w.push(C.value)}f(e,w,function(){r.trigger("hellobar.elements.emailSubmitted",e,w),o&&(window.location.href=u)})},function(){n.shake(m.parentNode)}),!1}function c(e,t,n){e&&e.match(/^[^@\s]+@[^@\s]+\.[^@\s]+$/)&&!e.match(/,/)?t():n()}function f(e,t,n){if(t&&t.length>0){var i=t.map(function(e){return e.trim().replace(/\,/g," ")}),o=i.join(",");a.send("c",e.model().contact_list_id,{e:o},function(){l.converted(e,n)})}}return{createInputFieldHtml:s,submitEmail:u}}),
hellobar.defineModule("elements.conversion",["base.format","base.serialization","base.bus","lib.crypto","visitor","elements.data","elements.visibility","tracking.internal","tracking.external"],function(e,t,n,i,o,r,a,l,s){function u(e,t){var i=e.model?e.model():e,u=i.id,c=function(){return i.subtype+"_conversion"},f=Math.round((new Date).getTime()/1e3),h=m(i),p=(o.getData(h)||0)+1;o.setConverted(h),a.setVisibilityControlCookie("success",i),r.setData(u,"nc",(r.getData(u,"nc")||0)+1),r.getData(u,"fc")||r.setData(u,"fc",f),r.setData(u,"lc",f),n.trigger("hellobar.elements.converted",i),1===p?(l.send("g",u,{a:d()},t),s.send(c(),u)):typeof t==typeof Function&&t()}function c(e){var t=e.model?e.model():e,i=t.id;h(t)||(l.send("v",i,{a:d()}),s.send("view",i)),r.setData(i,"nv",(r.getData(i,"nv")||0)+1);var o=Math.round((new Date).getTime()/1e3);r.getData(i,"fv")||r.setData(i,"fv",o),r.setData(i,"lv",o),n.trigger("hellobar.elements.viewed",t)}function f(e){var t=e.model?e.model():e,i=t.id;h(t)||s.send("click",i),n.trigger("hellobar.elements.clicked",t)}function d(){var e=/(^cc.*_[fl]$)|(^ec.*_[fl]$)|(^sc.*_[fl]$)|(^l\-.+)/,n={},i=o.getData();for(var r in i){var a=i[r];"string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a||"fv lv cc ec sc dt".indexOf(r)!==-1||r.match(e)||(n[r.toLowerCase()]=(i[r]+"").toLowerCase().substr(0,150))}return t.serialize(n)}function h(e){var t=m(e);return t&&o.getData(t)}function m(e){if("ContentUpgrade"==e.type)return"ec";switch(e.subtype){case"call":return"cc";case"email":return"ec";case"social":return"sc";case"traffic":return"l-"+p(e.settings.url)}}function p(t){return t=0===t.indexOf("/")||v(t)==v(document.location)?e.normalizeUrl(t,!0):e.normalizeUrl(t),t.length>40?i.SHA1(t).toString():t}function v(e){return e?(e+="",0===e.indexOf("/")?"":e.replace(/.*?\:\/\//,"").replace(/(.*?)\/.*/,"$1").replace(/www\./i,"").toLowerCase()):""}function g(e,t){var n=e.href;u(t,function(){"_blank"!=e.target&&(document.location=n)})}return{converted:u,viewed:c,clicked:f,trackClick:g}}),hellobar.defineModule("elements.data",["base.storage","base.serialization","base.site"],function(e,t,n){function i(e,t,n){if(e){e+="";var i=l;i[e]||(i[e]={}),i[e][t]=n,r()}}function o(e,t){if(e){e+="";var n=l;return n[e]||(n[e]={}),n[e][t]}}function r(){var i=[];for(var o in l){var r=l[o];"function"!=typeof r&&i.push(o+"|"+t.serialize(r))}e.setValue("hbs_"+n.siteId(),i.join("^"),1825)}function a(){for(var i=(e.getValue("hbs_"+n.siteId())||"").split("^"),o=0;o<i.length;o++){var r=i[o];if(r){var a=r.indexOf("|"),s=r.slice(0,a),u=r.slice(a+1);l[s]=t.deserialize(u)}}}var l={};return{initialize:function(){a()},getData:o,setData:i}}),hellobar.defineModule("elements",["hellobar","base.sanitizing","base.preview","rules","elements.class","elements.class.bar","elements.class.slider","elements.class.alert"],function(e,t,n,i,o,r,a,l){function s(e){return c(u(e))}function u(e){var n=["headline","caption","content","link_text"];e=t.sanitize(e,n);var i=e.type+"Element",r=v[i]||o,a=new r(e);return a.dataCopy=e,a}function c(e){if(e.use_question&&(e=h(e)),"undefined"==typeof e.pageIndex&&(e.pageIndex=g.length,e.me="hellobar('elements').findById("+e.id+")",g.indexOf(e)===-1)){g.reduce(function(t,n){return t||n.id===e.id},!1)!==!0&&(g.push(e),"#nohb"!==document.location.hash&&(e.setCSS(p.elementCSS()),e.attach()))}}function f(e){for(var t={},n=0,i=g.length;n<i;n++)t[g[n].id]=g[n];return t[e]===undefined?null:t[e]}function d(){for(var e=0;e<g.length;e++)g[e].remove();g=[]}function h(e){if(!e.use_question||!e.dataCopy)return e;var t=e;return e=e.dataCopy,e.questionified=!0,e.template_name=e.template_name.split("_")[0]+"_question",e.headline=e.question,e.caption=null,e.use_question=!1,e.image_url=null,e=u(e),e.displayAnswer=function(i){1===i?(t.headline=e.answer1response,t.caption=e.answer1caption,t.link_text=e.answer1link_text):(t.headline=e.answer2response,t.caption=e.answer2caption,t.link_text=e.answer2link_text),t.use_question=!1,t.animated=!1,t.dontRecordView=!0,t.view_condition="immediately",n.isActive()||(e.remove(),g.splice(g.indexOf(e),1),c(t))},n.isActive()&&n.getAnswerToDisplay()&&(e.displayAnswer(n.getAnswerToDisplay()),e=t),e}function m(){i.apply().then(function(e){for(var t=0;t<e.length;t++)s(e[t])})}var p=e.createModuleConfiguration({elementCSS:"string",autoRun:"boolean"}),v={SiteElement:o,BarElement:r,SliderElement:a,AlertElement:l},g=[];return{configuration:function(){return p},initialize:function(e){e&&e(p),p.autoRun()&&m()},inspect:function(){return{elementsOnPage:function(){return g}}},createAndAddToPage:s,removeAllSiteElements:d,findById:f}}),hellobar.defineModule("elements.injection",[],function(){function e(e,t){return i(e,t)}function t(e){(arguments.length<=1||arguments[1]===undefined||!arguments[1])&&document.body.children.length>0?document.body.insertBefore(e,document.body.children[0]):document.body.appendChild(e)}function n(e){i=e}var i=t;return{inject:e,overrideInjectionPolicy:n}}),hellobar.defineModule("elements.intents",["base.environment"],function(e){function t(t,n){var i=!1;if("exit"===t){r.intentBodyBlurEvent&&(i=!0,r.intentBodyBlurEvent=!1),r.mousedOut&&(i=!0),(document.hidden||document.unloaded)&&(i=!0);var o=new Date;"mobile"===e.device()&&o.getTime()-r.intentStartTime>3e4&&(i=!0)}i&&n()}function n(e,t){"bottom"===e?e=document.body.scrollHeight-window.innerHeight-300:"middle"===e&&(e=(document.body.scrollHeight-2*window.innerHeight)/2),(window.pageYOffset>=e||document.body.scrollHeight<=e+window.innerHeight)&&t()}function i(){r={mouseInTime:null,mousedOut:!1,intentBodyBlurEvent:!1,intentStartTime:(new Date).getTime()},document.body.addEventListener("mouseenter",function(){r.mouseInTime||(r.mousedOut=!1,r.mouseInTime=new Date)}),window.onblur=function(){setTimeout(function(){r.intentBodyBlurEvent=document.activeElement===document.body},0)},document.body.addEventListener("mouseleave",function(){if(r.mouseInTime){(new Date).getTime()-r.mouseInTime.getTime()>2e3&&(r.mouseInTime=null,r.mousedOut=!0)}})}function o(e,i,o){var r=null;return"wait-5"===e?setTimeout(i,5e3):"wait-10"===e?setTimeout(i,1e4):"wait-30"===e?setTimeout(i,3e4):"wait-60"===e?setTimeout(i,6e4):"scroll-some"===e?r=setInterval(function(){n(300,i)},500):"scroll-middle"===e?r=setInterval(function(){n("middle",i)},500):"scroll-to-bottom"===e?r=setInterval(function(){n("bottom",i)},500):"exit-intent"===e?r=setInterval(function(){t("exit",i)},100):"stay-hidden"==e?setTimeout(o,500):i(),r}var r={};return{initializeIntentListeners:i,applyViewCondition:o}});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();hellobar.defineModule("elements.relevance",["base.environment","elements.data"],function(e,t){function n(t){var n=i(t),o=function(e,t){return e[t.subtype]||(e[t.subtype]=[]),e[t.subtype].push(t),e},r=n.reduce(o,{});return r.email||e.isMobileDevice()&&r.call||r.social||r.traffic||r.announcement}function i(e){if(e.length<=1)return e;var t=r(e.map(function(e){return e.rule}));return e.filter(function(e){return t.indexOf(e.rule)>=0})}function o(e){var t=10,n=e.conditions.length;return 0===n?0:"all"===e.matchType?t*n:t/n}function r(e){if(e.length<=1)return e;var t=e.reduce(function(e,t){var n=o(t);return e[n]||(e[n]=[]),e[n].push(t),e},{});return t[Math.max.apply(null,Object.keys(t))]}function a(e){var t=n(e);if(t&&0!==t.length){var i=new s(t);return i.theOnlyElement()||i.elementThatUserSeen()||i.randomElementWithoutEnoughViews()||i.highestConversionRateElement()||i.randomElement()}}var l=function(e){return e[Math.floor(Math.random()*e.length)]},s=function(){function e(t){_classCallCheck(this,e),this.possibleSiteElements=t||[],this.siteElementsWithoutEnoughViews=this.possibleSiteElements.filter(function(e){return e.views<1e3}),this.mode=Math.random()>=.9?"Explore":"Exploit"}return _createClass(e,[{key:"randomElementWithoutEnoughViews",value:function(){if(this.siteElementsWithoutEnoughViews.length>=1)return l(this.siteElementsWithoutEnoughViews)}},{key:"elementThatUserSeen",value:function(){for(var e=0;e<this.possibleSiteElements.length;e++){var n=this.possibleSiteElements[e];if(t.getData(n.id,"nv"))return n}}},{key:"randomElement",value:function(){if("Explore"===this.mode)return l(this.possibleSiteElements)}},{key:"highestConversionRateElement",value:function(){if("Exploit"===this.mode)return this.possibleSiteElements.sort(function(e,t){return e.conversion_rate<t.conversion_rate?1:e.conversion_rate>t.conversion_rate?-1:0}),this.possibleSiteElements[0]}},{key:"theOnlyElement",value:function(){if(1===this.possibleSiteElements.length)return this.possibleSiteElements[0]}}]),e}();return{getBestElement:a}}),hellobar.defineModule("elements.visibility",["base.storage","base.environment","elements.data"],function(e,t,n){function i(e,t){return"HB-visibilityControl-"+e+"-"+t}function o(t,n){var o=i(t,n);e.removeValue(o)}function r(t,n){function o(){switch(t){case"dismiss":return"duration";case"success":return"success_duration";default:return"duration"}}function r(){return a&&a.settings&&a.settings.cookie_settings&&a.settings.cookie_settings[o()]}var a=n.model?n.model():n,l=r();if((l=parseInt(l))>0){var s=i(t,a.id),u=(new Date).toString();e.setValue(s,u,l)}}function a(t){var n=["dismiss","success"],o=!0;return n.forEach(function(n){var r=i(n,t.id);e.getValue(r)&&(o=!1)}),o}function l(e){return"call"===e.subtype&&!t.isMobileDevice()}function s(e){function n(){return"Bar"!==e.type&&t.isMobileWidth(e)}return"Bar"!==e.type&&"Slider"!==e.type&&"Alert"!==e.type||a(e)||u(e)||n()||l(e)?!(!a(e)&&!u(e)||n()||l(e)):(e.view_condition="stay-hidden",!0)}function u(e){var t=new Date(1e3*n.getData(e.id,"lv"));return new Date(e.updated_at)>t}return{setVisibilityControlCookie:r,removeVisibilityControlCookie:o,shouldShowElement:s,inspect:function(){return{allCookies:function(){for(var e={},t=0;t<localStorage.length;t++){var n=localStorage.key(t);0===n.indexOf("HB-visibilityControl-")&&(e[n]=localStorage.getItem(n))}return e}}}}}),hellobar.defineModule("geolocation",["hellobar","base.storage","base.ajax","base.site","base.serialization","base.deferred"],function(e,t,n,i,o,r){function a(){return"hbglc_"+i.siteId()}function l(e){var t=JSON.parse(e);return{gl_cty:t.city,gl_ctr:t.countryCode,gl_rgn:t.region,countryName:t.country,regionName:t.regionName,region:t.region,cityName:t.city}}function s(){var e;this.setData=function(n){e=n,t.setValue(a(),o.serialize(n),1)},this.getData=function(){return e?e:t.getValue(a())}}function u(e){function t(t){return e?t[e]:t}var i=r(),a=c.getData(),s="string"==typeof a?o.deserialize(a):a;if(s){var u=t(s);i.resolve(u)}else n.get(f.geolocationUrl(),function(e){var n=l(e);c.setData(n),i.resolve(t(n))});return i.promise()}var c=new s,f=new e.createModuleConfiguration({geolocationUrl:"string"});return{configuration:function(){return f},getGeolocationData:function(e){return u(e)},regionName:function(){return u("regionName")},cityName:function(){return u("cityName")},countryName:function(){return u("countryName")}}}),hellobar.defineModule("geolocation.injection",["hellobar","base.dom","base.bus","geolocation"],function(e,t,n,i){function o(e){var t=function(){return e.getAttribute(a)||""},n=e.getAttribute(r)+"Name";i.getGeolocationData(n).then(function(n){e.textContent=n||t()})}var r="data-hb-geolocation",a="data-hb-geolocation-default",l="["+r+"]",s=e.createModuleConfiguration({autoRun:{type:"boolean",defaultValue:!1}}),u={initialize:function(e){e&&e.call(u,s),s.autoRun()&&(setTimeout(function(){u.processAllDocuments()},0),n.on("hellobar.elements.viewed",function(){u.processAllDocuments()}))},configuration:function(){return s},processElement:function(e){var t=e.querySelectorAll(l);Array.prototype.forEach.call(t,function(e){!e.textContent&&o(e)})},processAllDocuments:function(){t.runOnDocumentReady(function(){t.forAllDocuments(function(e){var t=e.querySelectorAll(l);Array.prototype.forEach.call(t,function(e){o(e)})})})}};return u}),hellobar.defineModule("tracking.external",["hellobar","tracking.external.googleAnalytics","tracking.external.legacyGoogleAnalytics","tracking.external.googleTagManager"],function(e,t,n,i){function o(){return l.some(function(e){return e.available()})}function r(e,t){var n=function(e){l.forEach(function(t){return t.send(e)})};s(e,t).forEach(function(e){return n(e)})}var a=e.createModuleConfiguration({externalTrackings:{type:Array,defaultValue:[]}}),l=[t,n,i],s=function(e,t){return(a.externalTrackings()||[]).filter(function(n){return n.type===e&&n.id===t})};return{configuration:function(){return a},available:o,send:r,inspect:function(){return{trackingEngines:l}}}}),hellobar.defineModule("tracking.external.googleAnalytics",["hellobar"],function(e){function t(){return"function"==typeof o()}function n(e){var n=e.category,i=e.action,r=e.label;t()&&o()("send",{hitType:"event",eventCategory:n,eventAction:i,eventLabel:r})}var i=e.createModuleConfiguration({provider:"function"}),o=function(){var e=i.provider();return e?e():window[window.GoogleAnalyticsObject||"ga"]};return{configuration:function(){return i},available:t,send:n,inspect:function(){return{ga:o}}}}),hellobar.defineModule("tracking.external.legacyGoogleAnalytics",["hellobar"],function(e){function t(){return"object"==typeof o()}function n(e){var n=e.category,i=e.action,r=e.label;t()&&o().push(["_trackEvent",n,i,r])}var i=e.createModuleConfiguration({provider:"function"}),o=function(){var e=i.provider();return e?e():window._gaq};return{configuration:function(){return i},available:t,send:n,inspect:function(){return{ga:o}}}}),hellobar.defineModule("tracking.external.googleTagManager",["hellobar","base.environment"],function(e,t){function n(){return"object"==typeof r()}function i(e){var i=e.category,o=e.action,a=e.label,l={event:"HelloBarEvent",category:i,action:o,label:a},s=t.utmCodes();for(var u in s)l[u]=s[u];n()&&r().push(l)}var o=e.createModuleConfiguration({provider:"function"}),r=function(){var e=o.provider();return e?e():window.dataLayer};return{configuration:function(){return o},available:n,send:i,inspect:function(){return{gtm:r}}}}),hellobar.defineModule("tracking.internal",["hellobar","base.site","base.storage","base.preview","base.format","lib.crypto"],function(e,t,n,i,o,r){function a(e,n,i,o){if(s())return void(o&&o());var r="/"+e+"/"+f(t.siteId());n&&(r+="/"+f(n));var a=Math.round((new Date).getTime()/1e3);i.t=a,i.v=h(),i.f="i",i.s=d(m.siteWriteKey(),r,i),r+="?"+c(i);var l=document.createElement("img");if(l.style.display="none",o){var p=!1,v=function(){p||o(),p=!0};setTimeout(v,750),l.onload=v}l.src=u(r)}function l(e){if(e.match(/hb_ignore/i)){var t=!!e.match(/hb_ignore=true/i);n.setValue("disableTracking",t,1825)}}function s(){return i.isActive()||o.asBool(n.getValue("disableTracking"))}function u(e){return("https:"===document.location.protocol?"https":"http")+"://"+m.backendHost()+e}function c(e){var t=[];for(var n in e)"function"!=typeof e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function f(e){var t,n="-",i="_",o="S6pjZ9FbD8RmIvT3rfzVWAloJKMqg7CcGe1OHULNuEkiQByns5d4Y0PhXw2xta",r=e+"",a=[],l=[r.slice(0,3),r.slice(3,6),r.slice(6,9)],s=[];for(t=0;t<l.length;t++)l[t]&&s.push(l[t]);for(t=0;t<s.length;t++){for(var u="",c=s[t].split(""),f=0;f<c.length&&"0"==c[f];f++)u+=i;var d=parseInt(s[t],10);if(0!=d)for(;;){var h;if(h=d>o.length?Math.floor(Math.random()*o.length+1):Math.floor(Math.random()*d+1),u+=o[h-1],(d-=h)<=0)break}a.push(u)}return a.join(n)}function d(e,t,n){var i=[];for(var o in n)"function"!=typeof n[o]&&"s"!=o&&i.push(o+"="+n[o]);return i.sort(),r.HmacSHA512(t+"?"+i.join("|"),e).toString()}function h(){var e;if(e=n.getValue("hbuid"))return e;var t=(new Date).getTime();return e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)}),n.setValue("hbuid",e,1825),e}var m=e.createModuleConfiguration({backendHost:"string",siteWriteKey:"string"});return{configuration:function(){return m},initialize:function(e){e&&e(m),l(location.search)},send:a}}),hellobar.defineModule("visitor",["base.format","base.timezone","base.environment","base.storage","base.serialization","base.site","geolocation"],function(e,t,n,i,o,r,a){function l(){var i=new Date,o=Math.round(i.getTime()/1e3),r=3600,a=24*r,l=0;d("fv")||h("fv",o);var f=d("lv");f&&h("ls",Math.round((o-f)/a)),(o-f)/r>1&&(l=1),h("lv",o),h("lf",Math.round((o-d("fv"))/a)),h("nv",(d("nv")||0)+1),h("ns",(d("ns")||0)+l);var m=s(document.location);if(h("ad_so",m.utm_source,!0),h("ad_ca",m.utm_campaign,!0),h("ad_me",m.utm_medium,!0),h("ad_co",m.utm_content,!0),h("ad_te",m.utm_term,!0),h("pq",m,!0),document.referrer){var p=u().toLowerCase(),v=(document.referrer+"").replace(/.*?\:\/\//,"").replace(/www\./i,"").toLowerCase().substr(0,150),g=v.replace(/(.*?)\/.*/,"$1");if(g.indexOf(p)==-1){d("or")||h("or",v),h("rf",v),h("rd",g);var y=s(document.referer);h("st",y.query||y.q||y.search,!0)}h("pp",v)}else h("rf",""),h("rd",""),h("pp","");h("pu",e.normalizeUrl(document.location+"",!1)),h("pup",e.normalizeUrl(document.location.pathname,!0)),h("dt",c(t.nowInTimezone())),h("dv",n.device())}function s(e){var t={};if(!e)return t;e+="";var n=e.indexOf("?")==-1?e:e.split("?")[1];if(!n)return t;for(var i=n.split("&"),o=0;o<i.length;o++){var r,a,l=i[o].split("=");l[1]||(l[1]="");var s=unescape(encodeURIComponent(l[0])),r=decodeURIComponent(escape(s)),s=unescape(encodeURIComponent(l[1])),a=decodeURIComponent(escape(s));t[r]=a}return t}function u(){var e,t,n="tld=ck",i=document.location.hostname.split(".");for(e=i.length-1;e>=0;e--)if(t=i.slice(e).join("."),document.cookie=n+";domain=."+t+";",document.cookie.indexOf(n)>-1)return document.cookie=n.split("=")[0]+"=;domain=."+t+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",t;return document.location.hostname}function c(e){void 0===e&&(e=new Date);var t=e.getMonth()+1;return e.getFullYear()+"-"+f(t)+"-"+f(e.getDate())}function f(e,t){for(var n=!0;n;){var i=e,o=t;if(n=!1,i=i.toString(),void 0===o&&1==i.length&&(o=2),o=o||i.length,i.length>=o)return i;e="0"+i,t=o,n=!0}}function d(e){return e?e.indexOf("region")!==-1||e.indexOf("gl_")!==-1?a.getGeolocationData(e):g[e]:g}function h(e,t,n){n&&!t||(g[e]=t,m())}function m(){i.setValue("hbv_"+r.siteId(),o.serialize(g),1825)}function p(){g=o.deserialize(i.getValue("hbv_"+r.siteId()))}function v(e){var t=Math.round((new Date).getTime()/1e3);h(e,(d(e)||0)+1),h(e+"_f",t),h(e+"_l",t)}var g={};return{initialize:function(){p(),l()},inspect:function(){return{setData:function(e,t,n){return h(e,t,n)}}},setConverted:v,getData:function(e){return d(e)}}}),hellobar.defineModule("inspect",["hellobar","elements","rules","base.site","base.metainfo","contentUpgrades"],function(e,t,n,i,o,r){var a=function(){return t.inspect().elementsOnPage()},l=function(){return n.inspect().allElementModels()},s=function(){return n.inspect().allRules()},u=function(){return r.configuration().contentUpgrades()},c=["id","subtype","type","template_name","theme_id","placement","headline","link_text","notification_delay","closable","show_branding","background_color","link_color","text_color","button_color","primary_color","trigger_color"],f=function(){return{version:o.version(),timestamp:o.timestamp(),siteId:i.siteId(),siteUrl:i.siteUrl(),elements:l(),elementsOnPage:a(),rules:s(),activeRules:a().map(function(e){return e.model?e.model().rule:e.rule}),rulesWithElements:s().filter(function(e){return e.siteElements.length>0}),rulesWithoutElements:s().filter(function(e){return 0==e.siteElements.length}),contentUpgrades:u()}},d=function(e,t,n){var i=e.activeRules.filter(function(e){return e==t}).length>0?"ACTIVE":"INACTIVE",o=t.conditions.map(function(e){return e.segment+" "+e.operand+" "+e.value}).join(", ");console.groupCollapsed("["+i+"] Rule "+n+", matchType: "+t.matchType+" "+o),t.conditions.forEach(function(e,t){console.log("* Condition "+t+":"),console.log('  - segment: "'+e.segment+'"'),console.log('  - operand: "'+e.operand+'"'),Array.isArray(e.value)?console.log('  - values: "'+e.value.join('", "')+'"'):console.log('  - value: "'+e.value+'"')}),t.siteElements.length>0?(console.log("Site Elements:"),console.table(t.siteElements,c),e.elementsOnPage.forEach(function(e){t.siteElements.forEach(function(t){e.id===t.id&&console.log("*********** siteElement "+t.id+" is ACTIVE on this page ***********")})})):console.log("No siteElements."),console.log("---------------------------------------------------------------"),console.groupEnd()};return{printAll:function(){var e=f();console.info(o.info()+" for site#"+e.siteId+" "+e.siteUrl),console.groupCollapsed("elementsOnPage:"),console.table(a(),c),console.groupEnd(),console.groupCollapsed("activeRules:"),e.activeRules.forEach(function(t,n){return d(e,t,n)}),console.groupEnd(),console.groupCollapsed("allElementModels:"),console.table(l(),c),console.groupEnd(),console.groupCollapsed("rulesWithElements:"),e.rulesWithElements.forEach(function(t,n){return d(e,t,n)}),console.groupEnd(),console.groupCollapsed("rulesWithoutElements:"),e.rulesWithoutElements.forEach(function(t,n){return d(e,t,n)}),console.groupEnd()},all:function(){return f()}}}),function(){"undefined"==typeof window.hellobar.initialized?function(e,t){function n(t){return e("base.capabilities").has(t)}function i(){return e("base.preview").isActive()}function o(t,n){e(t,{configurator:n})}function r(e,t){for(var n=0;n<e.length;n++)t(e[n])}function a(){o("base.timezone",function(e){e.defaultTimezone(t.site_timezone)}),o("base.styling",function(e){e.externalCSS(t.hellobar_container_css)}),o("base.templating",function(e){r(t.templates,function(t){e.addTemplate(t.name,t.markup)}),r(t.branding_templates,function(t){e.addTemplate(t.name,t.markup)}),r(t.content_upgrade_template,function(t){e.addTemplate(t.name,t.markup)})}),o("geolocation",function(e){e.geolocationUrl(t.geolocation_url)}),!i()&&n("geolocation_injection")&&o("geolocation.injection",function(e){e.autoRun(!0)}),!i()&&o("tracking.internal",function(e){e.backendHost(t.hb_backend_host).siteWriteKey(t.site_write_key)}),!i()&&n("external_tracking")&&o("tracking.external",function(e){e.externalTrackings(t.external_tracking)}),o("rules",function(e){r(t.rules,function(t){e.addRule(t.match,t.conditions,t.site_elements)})}),o("elements",function(e){e.elementCSS(t.hellobar_element_css).autoRun(!0)}),o("contentUpgrades",function(n){n.contentUpgrades(t.content_upgrades).styles(t.content_upgrades_styles),e("contentUpgrades").run()}),!i()&&n("autofills")&&o("autofills",function(e){e.autofills(t.autofills).autoRun(!0)})}o("base.preview",function(e){e.previewIsActive(t.preview_is_active)}),o("base.metainfo",function(e){e.version(t.version),e.timestamp(t.timestamp)}),o("base.capabilities",function(e){e.capabilities(t.capabilities)}),o("base.site",function(e){e.siteId(t.site_id).siteUrl(t.site_url).secret(t.pro_secret)}),!e("base.environment").isIEXOrLess(8)&&t.script_is_installed_properly&&a(),e.initialized=!0}(hellobar,window.hellobarSiteSettings):console.warn("Hello Bar script is already loaded. It seems like you are including the Hello Bar script more than once. Ignoring.")}();